syntax = "proto3";

message User {
    string username = 1;
    string email = 2;
    string password = 3; // Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©: Ø§Ù„Ù€ password Ù‡Ù†Ø§ ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† hashed
    int32 id = 4;
}

message CreateUserRequest { // ğŸš¨ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¹Ø¯Ù„Øª CreateUserRequst Ù„Ù€ CreateUserRequest (Standard Naming)
    User user = 1;
}

message CreateUserResponse {
    int32 id = 1;
}

message GetUserRequest { // ğŸš¨ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¹Ø¯Ù„Øª GetUserRequst Ù„Ù€ GetUserRequest (Standard Naming)
    int32 id = 1;
}

message GetUserResponse {
    User user = 2; // ğŸš¨ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ù€ field number Ù‡Ù†Ø§ 2ØŒ Ù„Ø§Ø²Ù… ÙŠÙƒÙˆÙ† 1 Ù„Ùˆ Ø¯Ù‡ Ø£ÙˆÙ„ field
}

message CreateTokenRequest {
    User user = 1; // ğŸš¨ Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ù†Ø§ ØºØ§Ù„Ø¨Ø§Ù‹ Ù‡ØªØ­ØªØ§Ø¬ username/email Ùˆ password Ø¨Ø³ØŒ Ù…Ø´ ÙƒÙ„ Ø§Ù„Ù€ User object
}

message CreateTokenResponse {
    string token = 1;
}

message IsAuthenticatedRequest {
    string token = 1;
}

message IsAuthenticatedResponse {
    User user = 1;
    bool ok = 2; // ØºØ§Ù„Ø¨Ø§Ù‹ ok Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§ status Ø£Ùˆ boolean indicates success
}

service UserService {
    rpc CreateUser(CreateUserRequest) returns (CreateUserResponse) {};
    rpc GetUser(GetUserRequest) returns (GetUserResponse) {};
    rpc CreateToken(CreateTokenRequest) returns (CreateTokenResponse) {};
    rpc IsAuthenticated(IsAuthenticatedRequest) returns (IsAuthenticatedResponse) {};
}